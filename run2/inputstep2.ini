; Values are separated by at least one white space before and after comma.
; e.g.
;   Key = Value , Value , Value
; Values in the DEFAULT section can be read in other sections.
; Avoid using single quote. Please use double quotes only.
; Sections Dataset and Process are mandatory.

[DEFAULT]


[Main]
;lumi                    = 12101
;lumi                    = 19510
lumi                    = 5000
reweight_by_pu          = True
reweight_by_trigger     = True
apply_bdt_regression    = True


[Process]
; see https://twiki.cern.ch/twiki/bin/view/LHCPhysics/CERNYellowReportPageAt1314TeV#s_13_0_TeV


ZnnH125         = 0.8696*0.200*0.577 ,   101119.0 ,   101119.0000 , "#ff0000"
WlnH125         = 1.380 *0.326*0.577 ,   100803.0 ,   100803.0000 , "#cc0066"
monoH           = 0.13               ,    10000.0 ,    10000.0000 , "#cc3366"
WJetsHT100      = 1817.0 *1.23       ,  5262249.0 ,  5262249.0000 , "#cc3300"
WJetsHT200      = 471.6 *1.23        ,  4936055.0 ,  4936055.0000 , "#cc3300"
WJetsHT400      = 55.61*1.23         ,  4640575.0 ,  4640575.0000 , "#cc3300"
WJetsHT600      = 18.81*1.23         ,  4640575.0 ,  4640575.0000 , "#cc3300"
WJetsIncl       = 50100.0 *1.23      , 10017431.0 , 10017431.0000 , "#cc3300"
ZJetsHT100      = 372.6*1.10         ,  4986410.0 ,  4986410.0000 , "#ffcc00"
ZJetsHT200      = 100.8*1.10         ,  4546455.0 ,  4546455.0000 , "#ffcc00"
ZJetsHT400      = 11.99*1.10         ,  4546455.0 ,  4546455.0000 , "#ffcc00"
ZJetsHT600      = 4.113 *1.10        ,  4463773.0 ,  4463773.0000 , "#ffcc00"
TTPythia8       = 809.1              ,  2991597.0 ,  2991597.0000 , "#0000ff"
T_s             = 2.1 * 3.79         ,   499999.0 ,   499999.0000 , "#00ffcc"
T_t             = 2.1 * 56.4         ,  3990985.0 ,  3990985.0000 , "#00ffcc"
T_tW            = 2.1 * 11.1         ,   986096.0 ,   986096.0000 , "#00ffcc"
Tbar_s          = 2.1 * 1.76         ,   250000.0 ,   250000.0000 , "#00ffcc"
Tbar_t          = 2.1 * 30.7         ,  1999793.0 ,  1999793.0000 , "#00ffcc"
Tbar_tW         = 2.1 * 11.1         ,   971797.0 ,   971797.0000 , "#00ffcc"
QCDHT100        = 28730000.0         ,  4123591.0 ,  4123591.0000 , "#ff00ff"
QCDHT250        = 670500.0           ,  2668164.0 ,  2668164.0000 , "#ff00ff"
QCDHT500        = 26740.0            ,  4063331.0 ,  4063331.0000 , "#ff00ff"
QCDHT1000       = 769.7              ,  1464447.0 ,  1464447.0000 , "#ff00ff"
TTMad           = 809.1              , 25446876.0 , 25446876.0000 , "#0000ff"



[Stitch]
WJetsLHECUT     = "lheHT<100" , "100<=lheHT && lheHT<200" , "200<=lheHT && lheHT<400" , "400<=lheHT && lheHT<600" , "600<=lheHT"
WJetsHT100      =      192.0 ,  2574876.0 ,        0.0 ,        0.0 ,        0.0
WJetsHT200      =        0.0 ,      250.0 ,  4168706.0 ,        0.0 ,        0.0
WJetsHT400      =        0.0 ,        0.0 ,      214.0 ,  4502047.0 ,        0.0
WJetsHT600      =        0.0 ,        0.0 ,      214.0 ,  4502047.0 ,        0.0
WJetsIncl       =   473708.0 ,   177608.0 ,    79195.0 ,    10357.0 ,     3275.0
WJetsLHENORM    = "WJetsIncl" , "WJetsHT100" , "WJetsHT200" , "WJetsHT400" , "WJetsHT600"
WJetsLHECOUNT   = 473708.0 / 473900.0 , 2574876.0 / 2752734.0 , 4168706.0 / 4248329.0 , 4502047.0 / 9014451.0 , 0.0 / 3275.0
ZJetsLHECUT     = "100<=lheHT && lheHT<200" , "200<=lheHT && lheHT<400" , "400<=lheHT && lheHT<600" , "600<=lheHT"
ZJetsHT100      =  1452687.0 ,        0.0 ,        0.0 ,        0.0
ZJetsHT200      =      477.0 ,  3629801.0 ,        0.0 ,        0.0
ZJetsHT400      =      477.0 ,  3629801.0 ,        0.0 ,        0.0
ZJetsHT600      =        0.0 ,        0.0 ,      158.0 ,  4411117.0
ZJetsLHENORM    = "ZJetsHT100" , "ZJetsHT200" , "ZJetsHT400" , "ZJetsHT600"
ZJetsLHECOUNT   = 1452687.0 / 1453641.0 , 3629801.0 / 7259602.0 , 0.0 / 158.0 , 4411117.0 / 4411117.0



[Skim]
; from "srm://stormfe1.pi.infn.it:8444/srm/managerv2?SFN=/cms/store/user/arizzi/"
;tagMC         = "Ntuple_Step1V42_Step2Tag_EDMV42_Step2_V4a_MC"
;tagData       = "Ntuple_Step1V42_Step2Tag_EDMV42_Step2_V4a_Data"
tagMC         = "root://eoscms//eos/cms//store/user/capalmer/VHBBHeppyNtuples/V7/"
tagData       = "root://eoscms//eos/cms//store/user/capalmer/VHBBHeppyNtuples/V7/"

;baseline      = "(Vtype==4||Vtype==3||Vtype==2) && met_pt>100 && abs(Jet_eta[hJidx[0]])<2.5 && abs(Jet_eta[hJidx[1]])<2.5 && hJet_id[0]==1 && hJet_id[1]==1 && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && hJet_pt[0]>20 && hJet_pt[1]>20 && hJet_csv[0]>0 && hJet_csv[1]>0 && (hJets_btagCSV[0]>0.244 || hJets_btagCSV[1]>0.244)"
;baseline      = "(Vtype==4||Vtype==3||Vtype==2) && (met_pt>100 || patchMETtype1corr(met_pt,met_phi,METtype1diff.et,METtype1diff.phi)>100) && abs(Jet_eta[hJidx[0]])<2.5 && abs(Jet_eta[hJidx[1]])<2.5 && hJet_id[0]==1 && hJet_id[1]==1 && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && hJet_pt[0]>20 && hJet_pt[1]>20 && hJet_csv[0]>0 && hJet_csv[1]>0 && (hJets_btagCSV[0]>0.244 || hJets_btagCSV[1]>0.244)"
baseline      = "(Vtype==4||Vtype==3||Vtype==2) && met_pt>50"

;regression    = "(Vtype==4||Vtype==3||Vtype==2) && met_pt>80 && abs(Jet_eta[hJidx[0]])<2.5 && abs(Jet_eta[hJidx[1]])<2.5 && hJet_id[0]==1 && hJet_id[1]==1 && hJet_genPt[0]>15 && hJet_genPt[1]>15 && hJet_pt[0]>15 && hJet_pt[1]>15 && hJet_csv[0]>0.244 && hJet_csv[1]>0.244"
regression    = "(Vtype==4||Vtype==3||Vtype==2) && met_pt>120 && abs(Jet_eta[hJidx[0]])<2.5 && abs(Jet_eta[hJidx[1]])<2.5 && Jet_puId[hJidx[0]]==1 && Jet_puId[hJidx[1]]==1 && Jet_mcPt[hJidx[0]]>10 && Jet_mcPt[hJidx[1]]>10 && abs(Jet_mcFlavour[hJidx[0]])==5 && hJet_pt[0]>20 && hJet_pt[1]>20 && Jet_btagnew[hJidx[0]]>0 && Jet_btagnew[hJidx[1]]>0"
regression    = "(Vtype==4||Vtype==3||Vtype==2) && met_pt>120 && abs(Jet_eta[hJidx[0]])<2.5 && abs(Jet_eta[hJidx[1]])<2.5 && Jet_puId[hJidx[0]]==1 && Jet_puId[hJidx[1]]==1 && Jet_mcPt[hJidx[0]]>10 && Jet_mcPt[hJidx[1]]>10 && abs(Jet_mcFlavour[hJidx[0]])==5 && Jet_pt[hJidx[0]]>20 && Jet_pt[hJidx[1]]>20 && Jet_btagnew[hJidx[0]]>0 && Jet_btagnew[hJidx[1]]>0"
;fjregression  = "(Vtype==4||Vtype==3||Vtype==2) && met_pt>80 && nfathFilterJets>0 && abs(fathFilterJets_eta[0])<2.5 && abs(fathFilterJets_eta[1])<2.5 && fathFilterJets_genPt[0]>10 && fathFilterJets_genPt[1]>10 && (nfathFilterJets<3||fathFilterJets_genPt[2]>0) && abs(fathFilterJets_flavour[0])==5 && fathFilterJets_pt[0]>15 && fathFilterJets_pt[1]>15 && fathFilterJets_csvivf[0]>0 && fathFilterJets_csvivf[1]>0"
fjregression  = "(Vtype==4||Vtype==3||Vtype==2) && met_pt>80 && FatH.FatHiggsFlag==1 && nfathFilterJets>0 && abs(fathFilterJets_eta[0])<2.5 && abs(fathFilterJets_eta[1])<2.5 && fathFilterJets_genPt[0]>10 && fathFilterJets_genPt[1]>10 && abs(fathFilterJets_flavour[0])==5 && fathFilterJets_pt[0]>15 && fathFilterJets_pt[1]>15 && fathFilterJets_csv[0]>0 && fathFilterJets_csv[1]>0"
;-- triggerFlags id:
; "HLT_IsoMu24_eta2p1_v.*", #23
; "HLT_DiCentralJetSumpT100_dPhi05_DiCentralPFJet60_25_PFMET100_Flag_HBHENoiseFilterNoiseCleaned_v.*", #39
; "HLT_DiCentralJet20_CaloMET65_BTagCSV07_PFMHT80_v.*", #40  (run2012A)
; "HLT_DiCentralPFJet30_PFMET80_BTagCSV07_v.*", #41 (since run2012B)
; "HLT_PFMET150_v.*", #42
; "HLT_Ele27_WP80_v.*", #44
; "HLT_DiCentralPFJet30_PFMHT80_v.*", #49 ## (run2012A)
; "HLT_DiCentralPFJet30_PFMET80_v.*", #50 ## (since run2012B and prescaled)
; mettrigger should be identical to those in section [Trigger]
;mettrigger      = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"
mettrigger      = "1"
; metfilter should be identical to METVETO in section [Selection]
;metfilter       = "Flag_HBHENoiseFilter && Flag_ecalLaserCorrFilter && Flag_CSCTightHaloFilter && Flag_hcalLaserEventFilter && Flag_trackingFailureFilter && Flag_eeBadScFilter && (3==3)"
metfilter       = "1"
; 3 following triggers are used for trigger efficiency
metbtagtrigger  = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[49]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[50]==1)) )"
singlemutrigger = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=208686 && (triggerFlags[23]==1)) )"
singleeltrigger = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=208686 && (triggerFlags[44]==1)) )"


[Weight]
;ZnunuHighPt       = "efflumi * PUweight * triggerweight2012ABCD(met_pt)"
;ZnunuMedPt        = "efflumi * PUweight * triggerweight2012ABCD(met_pt)"
;ZnunuLowPt        = "efflumi * PUweight * (triggerFlags[41]) * 18618/19510."
;ZnunuLowCSV       = "efflumi * PUweight * triggerweight2012ABCD(met_pt)"

;ZnunuHighPt       = "efflumi * PUweight * (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)"
;ZnunuMedPt        = "efflumi * PUweight * (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)"
;ZnunuLowPt        = "efflumi * PUweight * (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)"
;ZnunuLowCSV       = "efflumi * PUweight * (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)"

ZnunuHighPt       = "efflumi * PUweight * triggercorr2012ABCD( (triggerFlags[42]==1 || triggerFlags[39]==1), (triggerFlags[41]==1), met_pt, max(hJets_btagCSV[0],hJets_btagCSV[1]) )"
ZnunuMedPt        = "efflumi * PUweight * triggercorr2012ABCD( (triggerFlags[42]==1 || triggerFlags[39]==1), (triggerFlags[41]==1), met_pt, max(hJets_btagCSV[0],hJets_btagCSV[1]) )"
ZnunuLowPt        = "efflumi * PUweight * triggercorr2012ABCD( (triggerFlags[42]==1 || triggerFlags[39]==1), (triggerFlags[41]==1), met_pt, max(hJets_btagCSV[0],hJets_btagCSV[1]) )"
ZnunuLowCSV       = "efflumi * PUweight * triggercorr2012ABCD( (triggerFlags[42]==1 || triggerFlags[39]==1), (triggerFlags[41]==1), met_pt, max(hJets_btagCSV[0],hJets_btagCSV[1]) )"


[Trigger]
ZnunuHighPt       = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"
ZnunuMedPt        = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"
ZnunuLowPt        = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"
ZnunuLowCSV       = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"


[Selection]
PTBIN             = "met_pt>170 && H.pt>130 && max(hJet_ptReg[0],hJet_ptReg[1])>60 && min(hJet_ptReg[0],hJet_ptReg[1])>30"
MEDPTBIN          = "130<met_pt && met_pt<=170 && H.pt>130 && max(hJet_ptReg[0],hJet_ptReg[1])>60 && min(hJet_ptReg[0],hJet_ptReg[1])>30"
LOWPTBIN          = "100<met_pt && met_pt<=130 && H.pt>100 && max(hJet_ptReg[0],hJet_ptReg[1])>60 && min(hJet_ptReg[0],hJet_ptReg[1])>30"
CSVBIN            = "max(hJets_btagCSV[0],hJets_btagCSV[1])>0.679 && min(hJets_btagCSV[0],hJets_btagCSV[1])>0.244"
LOWCSVBIN         = "max(hJets_btagCSV[0],hJets_btagCSV[1])>0.679 && min(hJets_btagCSV[0],hJets_btagCSV[1])<=0.244"
;LOWCSVBIN         = "max(hJets_btagCSV[0],hJets_btagCSV[1])>0.244 && !(max(hJets_btagCSV[0],hJets_btagCSV[1])>0.679 && min(hJets_btagCSV[0],hJets_btagCSV[1])>0.244)"
LEPTONVETO        = "Sum$(aLeptons_pt>5)==0"
JETVETO           = "Sum$(aJets_pt>30)==0"
METVETO           = "Flag_HBHENoiseFilter && Flag_ecalLaserCorrFilter && Flag_CSCTightHaloFilter && Flag_hcalLaserEventFilter && Flag_trackingFailureFilter && Flag_eeBadScFilter && (3==3)"

;-- ZnunuHighPt
ZnunuHighPt_VH    = "(Vtype==4) && "%(PTBIN)s" && "%(CSVBIN)s" && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.5 && abs(deltaPhi(met_phi,met_phi))<0.5 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuHighPt_ZjLF  = "(Vtype==4) && "%(PTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])<=0.898 && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.244 && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.5 && abs(deltaPhi(met_phi,met_phi))<0.5 && hJets_neHEF[0]<0.90 && hJets_neHEF[1]<0.90 && hJets_neEmEF[0]<0.90 && hJets_neEmEF[1]<0.90 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuHighPt_ZjHF  = "(Vtype==4) && "%(PTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.5 && abs(deltaPhi(met_phi,met_phi))<0.5 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuHighPt_WjLF  = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])<=0.898 && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.244 && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.5 && "%(JETVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuHighPt_WjHF  = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.5 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(JETVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuHighPt_TT    = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.5 && Sum$(aJets_pt>30)>=1 && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
;ZnunuHighPt_s_Top = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.5 && (Sum$(aJet_pt>30 && 2.5<abs(aJet_eta) && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0)==1) && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"

;-- ZnunuMedPt
ZnunuMedPt_VH     = "(Vtype==4) && "%(MEDPTBIN)s" && "%(CSVBIN)s" && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && abs(deltaPhi(met_phi,met_phi))<0.5 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuMedPt_ZjLF   = "(Vtype==4) && "%(MEDPTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])<=0.898 && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.244 && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && abs(deltaPhi(met_phi,met_phi))<0.5 && hJets_neHEF[0]<0.90 && hJets_neHEF[1]<0.90 && hJets_neEmEF[0]<0.90 && hJets_neEmEF[1]<0.90 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuMedPt_ZjHF   = "(Vtype==4) && "%(MEDPTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && abs(deltaPhi(met_phi,met_phi))<0.5 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuMedPt_WjLF   = "(Vtype==2||Vtype==3) && "%(MEDPTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])<=0.898 && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.244 && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && "%(JETVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuMedPt_WjHF   = "(Vtype==2||Vtype==3) && "%(MEDPTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(JETVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuMedPt_TT     = "(Vtype==2||Vtype==3) && "%(MEDPTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && Sum$(aJets_pt>30)>=1 && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
;ZnunuMedPt_s_Top  = "(Vtype==2||Vtype==3) && "%(MEDPTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && (Sum$(aJet_pt>30 && 2.5<abs(aJet_eta) && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0)==1) && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"

;-- ZnunuLowPt
ZnunuLowPt_VH     = "(Vtype==4) && "%(LOWPTBIN)s" && "%(CSVBIN)s" && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && met_pt/sqrt(METtype1corr.sumet)>3 && abs(deltaPhi(met_phi,met_phi))<0.5 && Sum$(aJets_pt>30)<=1 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuLowPt_ZjLF   = "(Vtype==4) && "%(LOWPTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])<=0.898 && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.244 && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && met_pt/sqrt(METtype1corr.sumet)>3 && abs(deltaPhi(met_phi,met_phi))<0.5 && Sum$(aJets_pt>30)<=1 && hJets_neHEF[0]<0.90 && hJets_neHEF[1]<0.90 && hJets_neEmEF[0]<0.90 && hJets_neEmEF[1]<0.90 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuLowPt_ZjHF   = "(Vtype==4) && "%(LOWPTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && met_pt/sqrt(METtype1corr.sumet)>3 && abs(deltaPhi(met_phi,met_phi))<0.5 && Sum$(aJets_pt>30)<=1 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuLowPt_WjLF   = "(Vtype==2||Vtype==3) && "%(LOWPTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])<=0.898 && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.244 && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && met_pt/sqrt(METtype1corr.sumet)>3 && "%(JETVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuLowPt_WjHF   = "(Vtype==2||Vtype==3) && "%(LOWPTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && met_pt/sqrt(METtype1corr.sumet)>3 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(JETVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuLowPt_TT     = "(Vtype==2||Vtype==3) && "%(LOWPTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && met_pt/sqrt(METtype1corr.sumet)>3 && Sum$(aJets_pt>30)>=1 && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
;ZnunuLowPt_s_Top  = "(Vtype==2||Vtype==3) && "%(LOWPTBIN)s" && max(hJets_btagCSV[0],hJets_btagCSV[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && met_pt/sqrt(METtype1corr.sumet)>3 && (Sum$(aJet_pt>30 && 2.5<abs(aJet_eta) && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0)==1) && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"

;-- ZnunuLowCSV (note: tighter mindphi)
ZnunuLowCSV_VH    = "(Vtype==4) && "%(PTBIN)s" && "%(LOWCSVBIN)s" && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && abs(deltaPhi(met_phi,met_phi))<0.5 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuLowCSV_ZjHF  = "(Vtype==4) && "%(PTBIN)s" && "%(LOWCSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && abs(deltaPhi(met_phi,met_phi))<0.5 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"
ZnunuLowCSV_WjHF  = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && "%(LOWCSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)>0.7 && abs(deltaPhi(H_phi,met_phi))>2.0 && "%(JETVETO)s" && "%(METVETO)s" && Jet_puId[hJidx[0]]>0 && Jet_puId[hJidx[1]]>0 && H.mass>0"


[Mjj Selection]
CSVBIN            = "max(hJets_btagCSV[0],hJets_btagCSV[1])>0.898 && min(hJets_btagCSV[0],hJets_btagCSV[1])>0.5"
MJJBIN            = "Sum$(aJets_pt>30)==0 && abs(deltaPhi(H_phi,met_phi))>2.95 && MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0))>1.5"

ZnunuHighPt_VH    = "H.pt>160 && hJet_pt[0]>80 && "%(CSVBIN)s" && "%(MJJBIN)s" && H.mass>0"
ZnunuMedPt_VH     = "H.pt>130 && hJet_pt[0]>60 && "%(CSVBIN)s" && "%(MJJBIN)s" && H.mass>0"
ZnunuLowPt_VH     = "H.pt>110 && hJet_pt[0]>60 && "%(CSVBIN)s" && "%(MJJBIN)s" && H.mass>0"
ZnunuLowCSV_VH    = "H.pt>160 && hJet_pt[0]>80 && "%(CSVBIN)s" && "%(MJJBIN)s" && H.mass>0"


[Variable]
;-- BDT classification
H_mjj                   = "H.mass"
H_ptjj                  = "H.pt"
H_ptj1                  = "hJet_pt[0]"
H_ptj2                  = "hJet_pt[1]"
H_dRjj                  = "deltaR(Jet_eta[hJidx[0]], hJet_phi[0], Jet_eta[hJidx[1]], hJet_phi[1])"
H_detajj                = "abs(Jet_eta[hJidx[0]]-Jet_eta[hJidx[1]])"
H_dthetapull            = "abs(deltaPullAngle)"
MET                     = "met_pt"
dphiHMET                = "abs(deltaPhi(H_phi,met_phi))"
mindphiMETjets          = "MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0))"
csvmax                  = "max(hJets_btagCSV[0],hJets_btagCSV[1])"
csvmin                  = "min(hJets_btagCSV[0],hJets_btagCSV[1])"
Naddjets                = "Sum$(aJets_pt>30)"

METphi                  = "met_phi"
METsig                  = "met_pt/sqrt(METtype1corr.sumet)"
METsumet                = "sqrt(METtype1corr.sumet)"
METfancysig             = "METtype1corr.sig"
MET_xyshift             = "MET_xyshift"
METphi_xyshift          = "METphi_xyshift"
minMET                  = "min(met_pt, METnoPUCh.et)"
;mindphi1                = "min(Min$(abs(deltaPhi(met_phi,hJet_phi))),1000*(Sum$(aJet_pt>25 && abs(aJet_eta)<4.5 && aJet_id && aJet_puId>0)==0)+Min$(abs(deltaPhi(met_phi,aJet_phi))+1000*(aJet_pt<=25 || abs(aJet_eta)>=4.5 || !aJet_id || aJet_puId<=0)))"
;mindphi2                = "min(0+Min$(abs(deltaPhi(met_phi,hJet_phi))),1000*(Sum$(aJet_pt>20 && abs(aJet_eta)<2.5)==0)+Min$(abs(deltaPhi(met_phi,aJet_phi))+1000*(aJet_pt<=20 || abs(aJet_eta)>=2.5)))"
mindphiMETfwdjets       = "min(Min$(abs(deltaPhi(met_phi,hJet_phi))),Min$(abs(deltaPhiMETjets(met_phi,aJet_phi,aJet_pt,aJet_eta)))+999*(Sum$(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0)==0) )"
mindphiMETjetsPt40      = "min(Min$(abs(deltaPhi(met_phi,hJet_phi))),Min$(abs(deltaPhiMETjets(met_phi,aJet_phi,aJet_pt,aJet_eta)))+999*(Sum$(aJet_pt>40 && abs(aJet_eta)<2.5)==0) )"
dphiTrackMET            = "abs(deltaPhi(met_phi,met_phi))"
V_pt                    = "V.pt"
V_mass                  = "V.mass"
mtHMET                  = "evalHMETMt(H.pt,H_phi,met_pt,met_phi)"
ptHMET                  = "evalHMETPt(H.pt,H_phi,met_pt,met_phi)"
cosThetaHbb             = "evalCosThetaHbb(hJet_pt[0],Jet_eta[hJidx[0]],hJet_phi[0],hJet_e[0],hJet_pt[1],Jet_eta[hJidx[1]],hJet_phi[1],hJet_e[1])"
HT                      = "Sum$(hJet_pt)+Sum$(aJet_pt*(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0))"
HTV                     = "V.pt+Sum$(hJet_pt)+Sum$(aJet_pt*(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0))"
ptjjOverHT              = "(Sum$(hJet_pt))/((Sum$(hJet_pt))+(Sum$(aJet_pt*(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0))) )"
H_etaj1                 = "Jet_eta[hJidx[0]]"
H_etaj2                 = "Jet_eta[hJidx[1]]"
H_phij1                 = "hJet_phi[0]"
H_phij2                 = "hJet_phi[1]"
H_csvj1                 = "hJets_btagCSV[0]"
H_csvj2                 = "hJets_btagCSV[1]"
H_dthetapull2           = "abs(deltaPullAngle2)"
maxajetpt               = "MaxIf$(aJet_pt, abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0)"
maxajetcsv              = "MaxIf$(aJet_csv_nominal, aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0)"
maxptajeteta            = "aJet_eta[0]+999*(Sum$(aJet_pt>30 && abs(aJet_eta)<4.5)==0)"
Naddbjets               = "Sum$(aJet_pt>30 && abs(aJet_eta)<2.5 && aJet_id==1 && aJet_puId>0 && aJet_csv_nominal>0.244)"
NaddjetsPt40            = "Sum$(aJet_pt>40 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0)"
NaddjetsIdT             = "Sum$(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puId>0 && aJet_nhf<0.90 && aJet_nef<0.90)"
NaddjetsCSV0            = "Sum$(aJet_pt>30 && abs(aJet_eta)<2.5 && aJet_id==1 && aJet_puId>0 && aJet_csv>0)"
Naddleps                = "nalep_Znn"
NPV                     = "nPVs"



;-- BDT b-jet energy regression
breg_rawpt              = "Jet_rawPt[hJCidx]"
breg_rawptJER           = "smear_pt_res(Jet_rawPt[hJCidx], Jet_mcPt[hJCidx], Jet_eta[hJCidx])"
breg_pt                 = "Jet_pt[hJCidx]"
;breg_et                 = "evalEt(Jet_pt[hJCidx], Jet_eta[hJCidx], Jet_phi, Jet_e[hJCidx])"
;breg_mt                 = "evalMt(hJet_pt, hJet_eta, hJet_phi, hJet_e)"
breg_eta                = "Jet_eta[hJCidx]"
breg_leadtrackpt        = "max(0,Jet_leadTrackPt[hJCidx])"
breg_vtx3dL             = "max(0,Jet_vtx3DVal[hJCidx])"
breg_vtx3deL            = "max(0,Jet_vtx3DSig[hJCidx])"
breg_vtxMass            = "max(0,Jet_vtxMass[hJCidx])"
breg_vtxPt              = "max(0,Jet_vtxPt[hJCidx])"
breg_chf                = "Jet_chHEF[hJCidx]"
breg_cef                = "Jet_chEmEF[hJCidx]"
breg_nhf                = "Jet_neHEF[hJCidx]"
breg_nef                = "Jet_neHEF[hJCidx]"
breg_nch                = "Jet_chMult[hJCidx]"
breg_ntot               = "Jet_mult[hJCidx]"
breg_eJEC               = "Jet_JECUnc[hJCidx]"
breg_softlepptrel       = "max(0,Jet_leptonPtRel[hJCidx])"
breg_softleppt          = "max(0,Jet_leptonPt[hJCidx])"
breg_softlepdR          = "max(0,Jet_leptonDeltaR[hJCidx])"

breg_fjrawpt            = "fathFilterJets_ptRaw"
breg_fjrawptJER         = "smear_pt_res(fathFilterJets_ptRaw, fathFilterJets_genPt, fathFilterJets_eta)"
breg_fjpt               = "fathFilterJets_pt"
breg_fjet               = "evalEt(fathFilterJets_pt, fathFilterJets_eta, fathFilterJets_phi, fathFilterJets_e)"
breg_fjmt               = "evalMt(fathFilterJets_pt, fathFilterJets_eta, fathFilterJets_phi, fathFilterJets_e)"
breg_fjeta              = "fathFilterJets_eta"
breg_fjleadtrackpt      = "max(0,fathFilterJets_ptLeadTrack)"
breg_fjvtx3dL           = "max(0,fathFilterJets_vtx3dL)"
breg_fjvtx3deL          = "max(0,fathFilterJets_vtx3deL)"
breg_fjvtxMass          = "max(0,fathFilterJets_vtxMass)"
breg_fjvtxPt            = "max(0,fathFilterJets_vtxPt)"
breg_fjchf              = "fathFilterJets_chf"
breg_fjcef              = "fathFilterJets_cef"
;breg_fjnhf             = "fathFilterJets_nhf"
;breg_fjnef             = "fathFilterJets_nef"
;breg_fjnch             = "fathFilterJets_nch"
breg_fjntot             = "fathFilterJets_nconstituents"
breg_fjeJEC             = "fathFilterJets_JECUnc"
breg_fjsoftlepptrel     = "max(0,fathFilterJets_SoftLeptptRel*(fathFilterJets_SoftLeptIdlooseMu==1 || fathFilterJets_SoftLeptId95==1))"
breg_fjsoftleppt        = "max(0,fathFilterJets_SoftLeptPt*(fathFilterJets_SoftLeptIdlooseMu==1 || fathFilterJets_SoftLeptId95==1))"
breg_fjsoftlepdR        = "max(0,fathFilterJets_SoftLeptdR*(fathFilterJets_SoftLeptIdlooseMu==1 || fathFilterJets_SoftLeptId95==1))"
breg_fjarea             = "fathFilterJets_jetArea"
breg_fjcostheta         = "fathFilterJets_cosTheta"

breg_evt_rho25          = "rho25"

breg_ptReg              = "hJet_ptReg"
breg_fjptReg            = "fathFilterJets_ptReg"


[Histogramming]
H_mjj                   = "M(jj)" , "GeV" , "F" , 24 , 20.0 , 260.0
H_ptjj                  = "p_{T}(jj)" , "GeV" , "F" , 40 , 100.0 , 500.0
H_ptj1                  = "p_{T}(j1)" , "GeV" , "F" , 40 , 50.0 , 450.0
H_ptj2                  = "p_{T}(j2)" , "GeV" , "F" , 25 , 20.0 , 270.0
H_dRjj                  = "#DeltaR(j1,j2)" , "" , "F" , 28 , 0.0 , 3.5
H_detajj                = "#Delta#eta(j1,j2)" , "" , "F" , 15 , 0.0 , 3.0
H_dthetapull            = "#Delta #theta_{pull}(j1,j2)" , "" , "F" , 16 , 0.0 , 3.2
MET                     = "pfMET" , "GeV" , "F" , 40 , 100.0 , 500.0
dphiHMET                = "#Delta#phi(H,MET)" , "" , "F" , 22 , 1.0 , 3.2
mindphiMETjets          = "min #Delta#phi(pfMET,jet)" , "" , "F" , 16 , 0.0 , 3.2
csvmax                  = "CSV max" , "" , "F" , 21 , 0.0 , 1.05
csvmin                  = "CSV min" , "" , "F" , 21 , 0.0 , 1.05
Naddjets                = "# add. jets {p_{T}>30 GeV,|#eta|<4.5}" , "" , "I" , 10 , 0.0 , 10.0

METphi                  = "pfMET phi" , "" , "F" , 16 , -3.2 , 3.2
METsig                  = "pfMET/sqrt(sumET)" , "" , "F" , 20 , 0.0 , 20.0
METsumet                = "sqrt(sumET)" , "sqrt(GeV)" , "F" , 20 , 0.0 , 80.0
METfancysig             = "pfMET fancy significance" , "" , "F" , 30 , 0.0 , 300.0
MET_xyshift             = "x/y-shifted pfMET" , "GeV" , "F" , 40 , 100.0 , 500.0
METphi_xyshift          = "x/y-shifted pfMET phi" , "" , "F" , 16 , -3.2 , 3.2
minMET                  = "min(pfMET, MET_{trk})" , "GeV" , "F" , 25 , 0.0 , 500.0
mindphiMETfwdjets       = "min_{jet |#eta|<4.5} #Delta#phi(pfMET,jet)" , "" , "F" , 16 , 0.0 , 3.2
mindphiMETjetsPt40      = "min_{jet p_{T}>40} #Delta#phi(pfMET,jet)" , "" , "F" , 16 , 0.0 , 3.2
dphiTrackMET            = "abs(#Delta#phi(pfMET,MET_{trk}))" , "" , "F" , 15 , 0.0 , 1.5
V_pt                    = "p_{T}(V)" , "GeV" , "F" , 40 , 100.0 , 500.0
V_mass                  = "m_{T}(V)" , "GeV" , "F" , 25 , 0.0 , 250.0
mtHMET                  = "m_{T}(H,MET)" , "GeV" , "F" , 16 , 200.0 , 1000.0
ptHMET                  = "p_{T}(H,MET)" , "GeV" , "F" , 16 , 0.0 , 800.0
cosThetaHbb             = "cos #theta* (H,b)" , "" , "F" , 20 , -1.0 , 1.0
HT                      = "H_{T}" , "GeV" , "F" , 20 , 100.0 , 500.0
HTV                     = "H_{T} (incl. V)" , "GeV" , "F" , 20 , 200.0 , 1000.0
ptjjOverHT              = "p_{T}(jj) / H_{T}" , "" , "F" , 21 , 0.0 , 1.05
H_etaj1                 = "#eta(j1)" , "" , "F" , 25 , -2.5 , 2.5
H_etaj2                 = "#eta(j2)" , "" , "F" , 25 , -2.5 , 2.5
H_phij1                 = "#phi(j1)" , "" , "F" , 16 , -3.2 , 3.2
H_phij2                 = "#phi(j2)" , "" , "F" , 16 , -3.2 , 3.2
H_csvj1                 = "CSV(j1)" , "" , "F" , 21 , 0.0 , 1.05
H_csvj2                 = "CSV(j2)" , "" , "F" , 21 , 0.0 , 1.05
H_dthetapull2           = "#Delta #theta_{pull,2}(j1,j2)" , "" , "F" , 16 , 0.0 , 3.2
maxajetpt               = "max p_{T}(add. j)" , "GeV" , "F" , 15 , 0.0 , 300.0
maxajetcsv              = "max CSV(add. j)" , "" , "F" , 21 , 0.0 , 1.05
maxptajeteta            = "#eta(highest-pt add. j)" , "" , "F" , 25 , -2.5 , 2.5
Naddbjets               = "# add. CSVL jets {p_{T}>30 GeV,|#eta|<2.5}" , "" , "I" , 10 , 0.0 , 10.0
NaddjetsPt40            = "# add. jets {p_{T}>40 GeV,|#eta|<4.5}" , "" , "I" , 10 , 0.0 , 10.0
NaddjetsIdT             = "# add. jets {p_{T}>30 GeV,|#eta|<4.5}, Tight jetID" , "" , "I" , 10 , 0.0 , 10.0
NaddjetsCSV0            = "# add. jets {p_{T}>30 GeV,|#eta|<2.5}, CSV>0" , "" , "I" , 10 , 0.0 , 10.0
Naddleps                = "# add. leptons {p_{T}>15 GeV, relIso<0.15}" , "" , "I" , 10 , 0.0 , 10.0
NPV                     = "# primary vertices" , "" , "I" , 25 , 0.0 , 50.0

breg_rawpt              = "raw p_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_rawptJER           = "raw (JER corr.) p_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_pt                 = "p_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_et                 = "E_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_mt                 = "M_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_eta                = "#eta(j)" , "" , "F" , 25 , -2.5 , 2.5
breg_leadtrackpt        = "leading track p_{T}(j)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_vtx3dL             = "sec vtx 3-d flight length(j)" , "cm" , "F" , 20 , 0.0 , 8.0
breg_vtx3deL            = "sec vtx 3-d flight length error(j)" , "cm" , "F" , 21 , 0.0 , 1.05
breg_vtxMass            = "sec vtx mass(j)" , "GeV" , "F" , 20 , 0.0 , 8.0
breg_vtxPt              = "sec vtx p_{T}(j)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_chf                = "charged hadronic frac(j)" , "" , "F" , 21 , 0.0 , 1.05
breg_cef                = "charged electromagnetic frac(j)" , "" , "F" , 21 , 0.0 , 1.05
breg_nhf                = "neutral hadronic frac(j)" , "" , "F" , 21 , 0.0 , 1.05
breg_nef                = "neutral electromagnetic frac(j)" , "" , "F" , 21 , 0.0 , 1.05
breg_nch                = "# charged particles(j)" , "" , "I" , 25 , 0.0 , 100.0
breg_ntot               = "# particles(j)" , "" , "I" , 25 , 0.0 , 100.0
breg_eJEC               = "JEC uncertainty(j)" , "GeV" , "F" , 20 , 0.0 , 0.02
breg_softlepptrel       = "p_{T, rel}(lep-in-j)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_softleppt          = "p_{T}(lep-in-j)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_softlepdR          = "#DeltaR(lep-in-j)" , "" , "F" , 12 , 0.0 , 0.6
breg_fjrawpt            = "raw p_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjrawptJER         = "raw (JER corr.) p_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjpt               = "p_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjet               = "E_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjmt               = "M_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjeta              = "#eta(fj)" , "" , "F" , 25 , -2.5 , 2.5
breg_fjleadtrackpt      = "leading track p_{T}(fj)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_fjvtx3dL           = "sec vtx 3-d flight length(fj)" , "cm" , "F" , 20 , 0.0 , 8.0
breg_fjvtx3deL          = "sec vtx 3-d flight length error(fj)" , "cm" , "F" , 21 , 0.0 , 1.05
breg_fjvtxMass          = "sec vtx mass(fj)" , "GeV" , "F" , 20 , 0.0 , 8.0
breg_fjvtxPt            = "sec vtx p_{T}(fj)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_fjchf              = "charged hadronic frac(fj)" , "" , "F" , 21 , 0.0 , 1.05
breg_fjcef              = "charged electromagnetic frac(fj)" , "" , "F" , 21 , 0.0 , 1.05
;breg_fjnhf             = "neutral hadronic frac(fj)" , "" , "F" , 21 , 0.0 , 1.05
;breg_fjnef             = "neutral electromagnetic frac(fj)" , "" , "F" , 21 , 0.0 , 1.05
;breg_fjnch             = "# charged particles(fj)" , "" , "I" , 25 , 0.0 , 100.0
breg_fjntot             = "# particles(fj)" , "" , "I" , 25 , 0.0 , 100.0
breg_fjeJEC             = "JEC uncertainty(fj)" , "GeV" , "F" , 20 , 0.0 , 0.02
breg_fjarea             = "jet area(fj)" , "" , "F" , 20 , 0.0 , 1.0
breg_fjcostheta         = "jet cos #theta(fj)" , "" , "F" , 20 , -1.0 , 1.0
breg_fjsoftlepptrel     = "p_{T, rel}(lep-in-fj)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_fjsoftleppt        = "p_{T}(lep-in-fj)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_fjsoftlepdR        = "#DeltaR(lep-in-fj)" , "" , "F" , 12 , 0.0 , 0.6
breg_evt_rho25          = "energy density in |#eta|<2.5" , "GeV" , "F" , 35 , 0.0 , 35.0
breg_ptReg              = "regressed p_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjptReg            = "regressed p_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0


[BDT Variable]
H_mjj                   = "V"
H_ptjj                  = "V"
H_ptj1                  = "V"
H_ptj2                  = "V"
H_dRjj                  = "V"
H_detajj                = "V"
H_dthetapull            = "V"
MET                     = "V"
dphiHMET                = "V"
mindphiMETjets          = "V"
csvmax                  = "V"
csvmin                  = "V"
Naddjets                = "V"

METphi                  = "S"
METsig                  = "S"
METsumet                = "S"
METfancysig             = "S"
MET_xyshift             = "S"
METphi_xyshift          = "S"
minMET                  = "S"
mindphiMETfwdjets       = "S"
mindphiMETjetsPt40      = "S"
dphiTrackMET            = "S"
V_pt                    = "S"
V_mass                  = "S"
mtHMET                  = "S"
ptHMET                  = "S"
cosThetaHbb             = "S"
HT                      = "S"
HTV                     = "S"
H_etaj1                 = "S"
H_etaj2                 = "S"
H_csvj1                 = "S"
H_csvj2                 = "S"
H_dthetapull2           = "S"
maxajetpt               = "S"
maxajetcsv              = "S"
maxptajeteta            = "S"
Naddbjets               = "S"
NaddjetsPt40            = "S"
NaddjetsIdT             = "S"
NaddjetsCSV0            = "S"
Naddleps                = "S"
NPV                     = "S"


[BDT Regression Variable]
breg_rawptJER           = "V"
breg_pt                 = "V"
;breg_et                 = "V"
;breg_mt                 = "V"
breg_eta               = "V"
breg_leadtrackpt        = "V"
breg_vtx3dL             = "V"
breg_vtx3deL            = "V"
breg_vtxMass            = "V"
breg_vtxPt              = "V"
breg_chf               = "V"
breg_cef                = "V"
breg_nhf               = "V"
breg_nef               = "V"
breg_nch               = "V"
breg_ntot               = "V"
;breg_eJEC               = "V"
breg_softlepptrel       = "V"
breg_softleppt          = "V"
breg_softlepdR          = "V"
;breg_evt_rho25         = "V"

[BDT Regression FJ Variable]
breg_fjrawptJER         = "V"
breg_fjpt               = "V"
breg_fjet               = "V"
breg_fjmt               = "V"
;breg_fjeta             = "V"
breg_fjleadtrackpt      = "V"
breg_fjvtx3dL           = "V"
breg_fjvtx3deL          = "V"
breg_fjvtxMass          = "V"
breg_fjvtxPt            = "V"
;breg_fjchf             = "V"
;breg_fjcef             = "V"
;breg_fjnhf             = "V"
;breg_fjnef             = "V"
;breg_fjnch             = "V"
breg_fjntot             = "V"
breg_fjeJEC             = "V"
breg_fjarea             = "V"
;breg_fjcostheta        = "V"
;breg_fjsoftlepptrel    = "V"
;breg_fjsoftleppt       = "V"
;breg_fjsoftlepdR       = "V"
;breg_evt_rho25         = "V"

[Systematics]
NONE                                  = "hJet_ptReg" , "hJet_ptReg"
CMS_vhbb_res_j_Znn_8TeVUp             = "hJet_ptReg , HptReg , HmassReg , aJet_pt , met_pt , met_phi , Sum$(aJets_pt>30) , MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)) , mindRHJet_dR , FatHmassReg" , "hJet_ptReg_res_j_up , HptReg_res_j_up , HmassReg_res_j_up , aJet_pt_res_j_up , MET_res_j_up , METphi_res_j_up , Sum$(aJets_pt>30)_res_j_up , MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0))_res_j_up , mindRHJet_dR_res_j_up , FatHmassReg_res_j_up"
CMS_vhbb_res_j_Znn_8TeVDown           = "hJet_ptReg , HptReg , HmassReg , aJet_pt , met_pt , met_phi , Sum$(aJets_pt>30) , MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)) , mindRHJet_dR , FatHmassReg" , "hJet_ptReg_res_j_down , HptReg_res_j_down , HmassReg_res_j_down , aJet_pt_res_j_down , MET_res_j_down , METphi_res_j_down , Sum$(aJets_pt>30)_res_j_down , MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0))_res_j_down , mindRHJet_dR_res_j_down , FatHmassReg_res_j_down"
CMS_vhbb_scale_j_Znn_8TeVUp           = "hJet_ptReg , HptReg , HmassReg , aJet_pt , met_pt , met_phi , Sum$(aJets_pt>30) , MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)) , mindRHJet_dR , FatHmassReg" , "hJet_ptReg_scale_j_up , HptReg_scale_j_up , HmassReg_scale_j_up , aJet_pt_scale_j_up , MET_scale_j_up , METphi_scale_j_up , Sum$(aJets_pt>30)_scale_j_up , MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0))_scale_j_up , mindRHJet_dR_scale_j_up , FatHmassReg_scale_j_up"
CMS_vhbb_scale_j_Znn_8TeVDown         = "hJet_ptReg , HptReg , HmassReg , aJet_pt , met_pt , met_phi , Sum$(aJets_pt>30) , MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0)) , mindRHJet_dR , FatHmassReg" , "hJet_ptReg_scale_j_down , HptReg_scale_j_down , HmassReg_scale_j_down , aJet_pt_scale_j_down , MET_scale_j_down , METphi_scale_j_down , Sum$(aJets_pt>30)_scale_j_down , MinIf$(abs(deltaPhi(met_phi,Jet_phi)),Sum$(Jet_pt>25 && abs(Jet_eta<2.4))==0))_scale_j_down , mindRHJet_dR_scale_j_down , FatHmassReg_scale_j_down"
CMS_vhbb_eff_bUp                      = "hJets_btagCSV , aJet_csv_nominal" , "hJet_csv_upBC , aJet_csv_upBC"
CMS_vhbb_eff_bDown                    = "hJets_btagCSV , aJet_csv_nominal" , "hJet_csv_downBC , aJet_csv_downBC"
CMS_vhbb_fake_b_8TeVUp                = "hJets_btagCSV , aJet_csv_nominal" , "hJet_csv_upL , aJet_csv_upL"
CMS_vhbb_fake_b_8TeVDown              = "hJets_btagCSV , aJet_csv_nominal" , "hJet_csv_downL , aJet_csv_downL"
UEPSUp                                = "PUweight , efflumi" , "PUweightP , efflumi_UEPS_up"
UEPSDown                              = "PUweight , efflumi" , "PUweightM , efflumi_UEPS_down"
CMS_vhbb_trigger_MET_Znn_8TeVUp       = "triggercorr2012ABCD , triggerweight2012ABCD" , "triggercorr2012ABCD_MET_up , triggerweight2012ABCD_up"
CMS_vhbb_trigger_MET_Znn_8TeVDown     = "triggercorr2012ABCD , triggerweight2012ABCD" , "triggercorr2012ABCD_MET_down , triggerweight2012ABCD_down"
CMS_vhbb_trigger_METCSV_Znn_8TeVUp    = "triggercorr2012ABCD" , "triggercorr2012ABCD_CSV_up"
CMS_vhbb_trigger_METCSV_Znn_8TeVDown  = "triggercorr2012ABCD" , "triggercorr2012ABCD_CSV_down"

